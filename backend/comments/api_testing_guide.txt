# Postman API Endpoint Testing Guide for Comments App

This guide provides instructions on how to test the API endpoints for the `comments` app using an API client like Postman.

**Note:** The base URL for the API is assumed to be `http://127.0.0.1:8000/api`. Please replace this with your actual backend server address if it's different.

---

### 1. List All Comments

This endpoint retrieves a paginated list of all comments. It is publicly accessible.

- **Method:** `GET`
- **URL:** `http://127.0.0.1:8000/api/comments/`
- **Headers:**
  - `Content-Type`: `application/json`
- **Instructions:**
  1. Send a GET request to the URL.
  2. You can use query parameters for filtering, e.g., `?article=<article_id>` to get comments for a specific article.

---

### 2. Retrieve a Single Comment

This endpoint retrieves the details of a specific comment by its ID. It is publicly accessible.

- **Method:** `GET`
- **URL:** `http://127.0.0.1:8000/api/comments/{comment_id}/`
- **Headers:**
  - `Content-Type`: `application/json`
- **Instructions:**
  1. Replace `{comment_id}` with the ID of the comment you want to retrieve.

---

### 3. Create a Comment (as an Authenticated User)

This endpoint allows a logged-in user to post a comment.

- **Method:** `POST`
- **URL:** `http://127.0.0.1:8000/api/comments/`
- **Headers:**
  - `Content-Type`: `application/json`
  - `Authorization`: `Bearer <YOUR_ACCESS_TOKEN>`
- **Body (raw JSON):**
  ```json
  {
      "article": 1,
      "body": "This is a comment from an authenticated user."
  }
  ```
- **Instructions:**
  1. Replace `<YOUR_ACCESS_TOKEN>` with a valid JWT access token.
  2. Replace the `article` ID with the ID of the article you are commenting on.

---

### 4. Create a Comment (as a Guest)

This endpoint allows a guest user to post a comment after verifying their phone number. This is a multi-step process.

**Step A: Request Phone Verification Code** (Uses the main auth endpoint)
- **Method:** `POST`
- **URL:** `http://127.0.0.1:8000/auth/request-phone-code/`
- **Body:** `{ "mobile_no": "+15551234567" }`
- **Action:** Note the `session_id` from the response.

**Step B: Verify Phone Code** (Uses the main auth endpoint)
- **Method:** `POST`
- **URL:** `http://127.0.0.1:8000/auth/verify-phone-code/`
- **Body:** `{ "session_id": "PASTE_SESSION_ID_HERE", "code": "123456" }`
- **Action:** A success response means the session is verified.

**Step C: Post the Comment**
- **Method:** `POST`
- **URL:** `http://127.0.0.1:8000/api/comments/`
- **Body (raw JSON):**
  ```json
  {
      "article": 1,
      "body": "This is a guest comment.",
      "author_name": "Guest User",
      "author_mobile": "+15551234567",
      "verification_session_id": "PASTE_SESSION_ID_HERE"
  }
  ```
- **Instructions:**
  1. Use the `session_id` from Step A in the `verification_session_id` field.
  2. Fill in the other details as required.

---

### 5. Delete a Comment (Authenticated Users Only)

This endpoint allows an authenticated user to delete their own comment.

- **Method:** `DELETE`
- **URL:** `http://127.0.0.1:8000/api/comments/{comment_id}/`
- **Headers:**
  - `Authorization`: `Bearer <YOUR_ACCESS_TOKEN>`
- **Instructions:**
  1. Replace `{comment_id}` with the ID of the comment to delete.
  2. Ensure you are authenticated as the user who created the comment or as an admin.